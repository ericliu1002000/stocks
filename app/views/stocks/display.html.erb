<% stock = Stock.where(code: '600001').first %>
<% stock.stock_data_infos.where(quarterly_date: '2007-12-31') %>

<% sds = StockDataInfo.where(quarterly_date: '2006-12-31', stock_id: stock.id) %>
<% sds = sds.joins(:stock_data_item) %>
<% sds = sds.where("stock_data_items.stock_summary_id = ?", 1) %>
<table>
  <th></th><th><%= '2016-03-31' %></th>
  <% sds.each do |sd| %>
    <tr>
      <td><%= sd.stock_data_item.name %></td>
      <td><%= sd.value == 0.0 ? '--' : sd.value %></td>
    </tr>
  <% end %>
</table>
